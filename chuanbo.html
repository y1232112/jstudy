<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>事件传播</title>
	<style type="text/css">
		#box1{
			width: 300px;
			height: 300px;
			background-color: yellowgreen;
		}
		#box2{
			width: 200px;
			height: 200px;
			background-color: yellow;
		}
		#box3{
			width: 150px;
			height: 150px;
			background-color: #ff0000;
		}
	</style>
	<script type="text/javascript">
		/*
		*事件的传播:
		* -  微软共公司认为 事件应由内向外传 事件应该在冒泡阶段传
		*   
		* -  网景公司认为  事件由外向内传 祖先向后代传 叫事件的捕获阶段
		*
		* - w3c 综合了两个公司的方案 将事件分成了三个阶段
		*      -1.捕获阶段
		*           -由祖先元素向目标元素捕获，不会触发事件
		*      -2.目标阶段
		*           -事件捕获到目标元素 开始在目标元素上 触发事件
		*      -3.冒泡阶段
		*           -事件从目标元素向祖先元素传递 一次触发祖先元素上的事件
		*
		* - 如果希望在捕获阶段执行事件 可以将 ddEventListener 第三个参数设置为true
		*       一般情况下 我们不希望在捕获阶段执行 
		*
		* - ie8以下浏览器没有捕获阶段
		*/
		window.onload=function(){
			var box1=document.getElementById("box1");
			var box2=document.getElementById("box2");
			var box3=document.getElementById("box3");
			bind(box1,"click",function(){
				alert('box1');
			})
			bind(box2,"click",function(){
				alert('box2');
			})
			bind(box3,"click",function(){
				alert('box3');
			})
			
			function bind(obj,eventStr,calback){
			  if(obj.addEventListener){
				obj.addEventListener(eventStr,calback,false);
			  }else{
				obj.attachEvent("on"+eventStr,function(){
					calback.call(obj);
			 	})
			  }
		    }
		}
		
	</script>
</head>

<body>
	<div id="box1">
		<div id="box2">
			<div id="box3"></div>
		</div>
	</div>
</body>
</html>
